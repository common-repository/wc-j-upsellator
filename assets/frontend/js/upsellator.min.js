!function(e){jQuery.event.special.touchstart={setup:function(e,t,n){this.addEventListener("touchstart",n,{passive:!t.includes("noPreventDefault")})}},jQuery.event.special.touchmove={setup:function(e,t,n){this.addEventListener("touchmove",n,{passive:!t.includes("noPreventDefault")})}},jQuery.event.special.touchend={setup:function(e,t,n){this.addEventListener("touchend",n,{passive:!t.includes("noPreventDefault")})}};let t,n,o=0,i=0,c=0,r=0,s=0,l,u=1e3*parseInt(e(".wc-timeline-inner-container").attr("data-notice-timeout"));function d(){e(".wc-j-upsellator-show-cart").addClass("opened"),e(".wc-timeline-button-show-cart").addClass("opened"),e(".wc-timeline-modal-cover").addClass("opened"),e(".wc-timeline-modal-cover-container").addClass("opened"),e("body").addClass("woo-upsellator-modal-active"),setTimeout(()=>e(".wc-timeline-notifications").fadeOut(500),u),window.setTimeout(()=>{e(document).bind("mouseup touchend",function(t){let n=e(".wc-timeline-modal-cover-container");n.is(t.target)||0!==n.has(t.target).length||p()})},500)}function p(){e(".wc-j-upsellator-show-cart").removeClass("opened"),e(".wc-timeline-button-show-cart").removeClass("opened"),e(".wc-timeline-modal-cover-container").removeClass("opened"),e(".wc-timeline-modal-cover").removeClass("opened"),e(".wc-timeline-cart-notice").fadeOut(1),e("body").removeClass("woo-upsellator-modal-active"),e(document).unbind("mouseup touchend")}function m(){e(".woocommerce-checkout").length&&(e(document.body).trigger("update_checkout"),e(".wc-timeline-checkout-upsell").remove())}function f(t,n){t>n&&(t=n),t<0&&(t=0);s=t*e(".wc-j-items-carousel-inner").width(),e(".wc-j-items-carousel-inner").css({transform:"translate3d( -"+s+"px, 0, 0)"}),e(".wc-j-bullet").removeClass("active"),e('.wc-j-bullet[data-index="'+t+'"]').addClass("active"),0==t?e(".wc-nav-prev").css("opacity",0):e(".wc-nav-prev").css("opacity",1),t==n?e(".wc-nav-next").css("opacity",0):e(".wc-nav-next").css("opacity",1)}function w(){e(".wc-j-items-carousel").length&&(i=0,o=e(".wc-j-bullet").length-1,c=0,s=0,l=0,r=0)}function h(){if(e(".wcjfw-shipping-bar").length){let o=parseFloat(e(".wc-timeline-footer").attr("data-total"))||0,i=parseInt(e(".wcjfw-shipping-bar").attr("data-current")),c=0,r=0,s=0;for(a=1;a<=wc_timeline.goals_count;a++){let l=parseFloat(e(".wcjfw-shipping-bar").attr("data-goal-limit-"+a));if(o<l){r=l,c=a-1;break}s=l,c=a}if(e(".wcjfw-shipping-bar").attr("data-current",c),c==wc_timeline.goals_count){e(".wcjfw-shipping-bar").progressBar(101,n,c);return}r=0==r?s:r;let u=r-s,d=o-s==0?.001:o-s;if(t=o?100*d/(u+.001):0,n=u-d,i==wc_timeline.goals_count&&c==wc_timeline.goals_count-1){e(".wcjfw-shipping-bar").progressBar(t,n,c);return}if(i<c){e(".wcjfw-shipping-bar").progressBar(99.99,n,i),setTimeout(()=>{e(".shipping-progress-bar").removeClass("transition"),e(".wcjfw-shipping-bar").progressBar(.1,n,c)},600),setTimeout(()=>{e(".shipping-progress-bar").addClass("transition"),e(".wcjfw-shipping-bar").progressBar(t,n,c)},700);return}if(i>c&&o){e(".wcjfw-shipping-bar").progressBar(.1,n,i),setTimeout(()=>{e(".shipping-progress-bar").removeClass("transition"),e(".wcjfw-shipping-bar").progressBar(99.99,n,c)},600),setTimeout(()=>{e(".shipping-progress-bar").addClass("transition"),e(".wcjfw-shipping-bar").progressBar(t,n,c)},700);return}e(".wcjfw-shipping-bar").progressBar(t,n,c)}}function g(){if(parseInt(e(".wc-item-count").text()),e(".elementor-menu-cart__toggle").length&&e(".wc-item-count").length){let t=parseInt(e(".wc-item-count").text());e(".elementor-menu-cart__toggle").find(".elementor-button-icon").attr("data-counter",t)}}e(document).ready(function(){if(e(document).on("click touch",".wc-j-upsellator-show-cart",function(){e(".wc-timeline-modal-cover-container").length?e(this).hasClass("opened")?p():d():window.location.href=wc_timeline.cart_url}),wc_timeline.is_cart_page&&setTimeout(()=>e(document.body).trigger("wc_fragment_refresh"),100),wc_timeline.has_carousel){function t(t){r="touchmove"==(t=t||window.event).type?-(c-t.touches[0].clientX):-(c-t.clientX),e(".wc-j-items-carousel-inner").css({transform:"translate3d( -"+(s-r)+"px, 0, 0)"})}function n(t){(l=s-r)-s<-45?i--:l-s>45&&i++,e(".wc-j-items-carousel-inner").css("transition","400ms ease all"),f(i,o),document.onmouseup=null,document.onmousemove=null,r=0}w(),e(document).on("click touch",".wc-j-bullet",function(){f(i=parseInt(e(this).attr("data-index")),o),r=0}),e(document).on("click touch",".wc-nav-prev",function(){0!=i&&(r=0,f(--i,o))}),e(document).on("click touch",".wc-nav-next",function(){i>=o||(r=0,f(++i,o))}),e(document.body).on("touchstart mousedown",".wc-j-items-carousel-inner",function o(i){i=i||window.event,e(".wc-j-items-carousel-inner").css("transition","unset"),"touchstart"==i.type?c=i.touches[0].clientX:(c=i.clientX,document.onmouseup=n,document.onmousemove=t)}),e(document.body).on("touchend",".wc-j-items-carousel-inner",n),e(document.body).on("touchmove",".wc-j-items-carousel-inner",t)}function $(e){return jQuery.ajax({url:wc_timeline.url,method:"post",dataType:"json",data:{action:"wc_timeline_remove_item",key:e}})}function v(t){if(!t.notification)return;let n=e(".wc-timeline-notifications");n.fadeOut(1),n.html(t.message),n.attr("data-type",t.type),n.fadeIn(),setTimeout(()=>n.fadeOut(500),u)}e(".wc-timeline-container-close-icon").on("click",function(){p()}),e(".wc-timeline-modal-cover-container").on("swiperight",function(){p()}),e(document).on("click touch",".wc-timeline-qty",function(){e(".wc-timeline-product .out-of-stock").fadeOut(1);let t=e(this).parent().find(".btn-qty"),n=parseFloat(t.val()),o=parseFloat(t.attr("max")),i=parseFloat(t.attr("min")),c=t.attr("step");if(n&&""!==n&&"NaN"!==n||(n=0),(""===o||"NaN"===o||-1===o)&&(o=""),(""===i||"NaN"===i)&&(i=0),c="any"===c||""===c||void 0===c||"NaN"===parseFloat(c)?1:parseFloat(c),e(this).is(".quantity-up")){if(o&&(o==n||n>o)){t.val(o),e(this).closest(".wc-timeline-product").find(".out-of-stock").fadeIn(100);return}t.val(parseInt(n+c))}else i&&(i==n||n<i)?t.val(i):n>0&&t.val(parseInt(n-c));t.trigger("change-qty")}),e(document).on("change-qty","input.btn-qty",function(){let t=e(this).closest(".wc-timeline-product"),n=e(this).attr("data-sku"),o=e(this).val();if(t.find(".loader").css("display","block"),e(".wc-timeline-action").prop("disabled",!0),o>0){var i,c;(i=n,c=o,jQuery.ajax({url:wc_timeline.url,method:"post",dataType:"json",data:{action:"wc_timeline_update_qty",key:i,qty:c}})).done(n=>{t.find(".qty").text(o),e(document.body).trigger("wc_fragment_refresh"),m()})}else $(n).done(t=>{e(document.body).trigger("wc_fragment_refresh"),m()})}),e(document).on("click",".wc-timeline-remove",function(){let t=e(this).closest(".wc-timeline-product"),n=t.attr("data-key"),o=$(n);t.find(".loader").css("display","block"),e(".wc-timeline-action").prop("disabled",!0),e(".wc-timeline-product .out-of-stock").fadeOut(1),o.done(t=>{e(document.body).trigger("wc_fragment_refresh"),m()})}),e(document).on("click",".coupon_button",function(){var t;let n=e('input[name="coupon_code"]').val();n.length<3||(e(this).addClass("loading"),(applied=(t=n,jQuery.ajax({url:wc_timeline.url,method:"post",dataType:"json",data:{action:"wc_timeline_apply_coupon",coupon:t}}))).done(t=>{if(v(t),e('input[name="coupon_code"]').val(""),t.notification&&"error"==t.type){e(this).removeClass("loading");return}e(document.body).trigger("wc_fragment_refresh")}))}),e(document).on("click",".remove-coupon",function(){var t;let n=e(this).attr("data-code");(removed=(t=n,jQuery.ajax({url:wc_timeline.url,method:"post",dataType:"json",data:{action:"wc_timeline_remove_coupon",coupon:t}}))).done(t=>{if(v(t),t.notification&&"error"==t.type){e(this).removeClass("loading");return}e(document.body).trigger("wc_fragment_refresh")})}),e(document).on("click",".wc-timeline-product .ajax_add_to_cart",function(){e(".wc-timeline-action").prop("disabled",!0),e(".wc-timeline-product .out-of-stock").fadeOut(1),e(this).closest(".wc-timeline-product").find(".loader").css("display","block")}),h(),e(document.body).on("added_to_cart",function(t,n,o){wc_timeline.open_on_add&&!e(".woocommerce-checkout").length&&-1==window.location.href.indexOf("elementor-preview")&&setTimeout(()=>{d()},100),m()}),e(document.body).on("wc_fragments_refreshed",function(){h(),e(".wc-timeline-action").prop("disabled",!1),e(".wc-timeline-product .loader").css("display","none"),g(),w()}),e(document.body).on("wc_fragments_loaded",function(){h(),e(".wc-timeline-action").prop("disabled",!1),e(".wc-timeline-product .loader").css("display","none"),g(),w()}),e(document.body).on("updated_checkout",function(){w()})})}(jQuery);